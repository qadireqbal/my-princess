<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, My Love! ❤️</title>
    <!-- Load Tailwind CSS for utility classes and quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Pacifico&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Prevent scrolling when cards fly out */
            /* UPDATED: Subtle Radial Gradient Background */
            background: radial-gradient(circle at top left, #fee2e2 0%, #fef2f2 60%, #fdf2f8 100%);
        }

        /* --- 3D Stacking Container and Perspective --- */
        .stack-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1500px; /* Essential for 3D effect */
        }

        /* --- Card Base Styles (UPDATED FOR MORE TEXT) --- */
        .card {
            position: absolute;
            width: 85vw;
            max-width: 400px; /* Slightly wider max-width */
            height: 75vh; /* Increased height for more text space */
            max-height: 700px; /* Increased max height */
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border-radius: 1.5rem;
            background-color: white;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
                        opacity 0.6s ease-out;
            transform-style: preserve-3d;
            backface-visibility: hidden;
            user-select: none;
            will-change: transform, opacity;
        }

        /* Card Content Styles (UPDATED FOR 1:1 IMAGE RATIO) */
        .card-img {
            width: 100%;
            height: auto; /* Allow height to be determined by aspect-ratio */
            aspect-ratio: 1 / 1; /* Ensures a perfect square (1:1) image space */
            object-fit: cover;
            border-radius: 1rem;
            border: 4px solid #fbcfe8;
            /* Added margin-bottom to separate image from text */
            margin-bottom: 1rem; 
        }

        .card p {
            /* Text content will now occupy the remaining space below the square image */
            font-size: 1rem;
            text-align: center;
            color: #3f0015;
            /* Removed margin-top: 1rem; since margin-bottom is added to the image */
            line-height: 1.4;
            /* Flex-grow allows the text area to expand to fill the new extra space */
            flex-grow: 1; 
            overflow-y: auto; /* Add scroll if text is too long */
            padding-top: 0.5rem;
        }
        
        /* Hint Text */
        .hint-text {
            position: absolute;
            bottom: 5vh;
            color: #f97316;
            font-size: 0.9rem;
            animation: pulse 1.5s infinite;
        }

        /* --- Individual Card Stacking (Initial Position) --- */
        /* These styles give each card a slight, random 3D tilt */
        #card-4 { 
            /* Top Card */
            z-index: 40; 
            transform: translate(-50%, -50%) rotate(3deg) translateZ(12px) scale(1); 
            background: #ffe4e6;
        }
        #card-3 { 
            z-index: 30; 
            transform: translate(-50%, -50%) rotate(-4deg) translateZ(8px) scale(0.98); 
            background: #fef3f7;
        }
        #card-2 { 
            z-index: 20; 
            transform: translate(-50%, -50%) rotate(2deg) translateZ(4px) scale(0.96); 
            background: #fffafa;
        }
        #card-1 { 
            /* Bottom Card - Needs a bit more padding/detail */
            z-index: 10; 
            transform: translate(-50%, -50%) rotate(-1deg) translateZ(0px) scale(0.94); 
            padding: 2.5rem; /* Slightly larger inner padding */
        }

        /* --- Final Message Section --- */
        .final-message {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none; /* Controlled by JS */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #fbcfe8 0%, #fef2f2 100%);
            z-index: 50;
            opacity: 0;
            transition: opacity 1s ease-in;
            font-family: 'Pacifico', cursive; /* Fun script font for the message */
        }

        .final-message.visible {
            display: flex;
            opacity: 1;
        }

        .cake-img {
            width: 80vw;
            max-width: 300px;
            margin-top: 2rem;
            animation: float 3s ease-in-out infinite alternate;
        }

        /* --- Animations --- */
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.7; }
        }
        
        @keyframes float {
            0% { transform: translateY(0); }
            100% { transform: translateY(-15px); }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="stack-container">
        <!-- Card 4 (TOP CARD) -->
        <div id="card-4" class="card absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
            <h2 class="text-xl font-bold text-pink-700">Thankyou to born baby</h2>
            <img src="images/22.jpg" alt="Favorite Memory" class="card-img">
            <p class="text-sm">"One this day Allah sent you to earth for me. He made you so cute and innocent and binded us with an invisible string forever."</p>
        </div>

        <!-- Card 3 -->
        <div id="card-3" class="card absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
            <h2 class="text-xl font-bold text-pink-700">When I saw you for first time</h2>
            <img src="images/11.jpg" alt="Sweetest Smile" class="card-img">
            <p class="text-sm">"We met because we were supposed to be met.I saw this pic for first time and my heart dug-dug, and in no time I fall in love of you."</p>
        </div>
        
        <!-- Card 2 -->
        <div id="card-2" class="card absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
            <h2 class="text-xl font-bold text-pink-700">Our biggest day</h2>
            <img src="images/33.jpg" alt="Pic of You Both" class="card-img">
            <p class="text-sm">"I wish our love is forever and we become of each other, we marry and live happy in our home with Qira"</p>
        </div>

        <!-- Card 1 (BOTTOM CARD) -->
        <div id="card-1" class="card absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
            <h2 class="text-3xl font-bold text-pink-800 mb-4">Click to Open Your Gift!</h2>
            <svg class="h-16 w-16 text-red-500 animate-bounce" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 19v-8.93a2 2 0 01.89-1.664L12 3l7.11 5.406a2 2 0 01.89 1.664V19M21 19H3.998" />
            </svg>
            <p class="text-lg font-semibold mt-4">May Allah bless u with all the happiness, success and health and we always live together.</p>
        </div>

        <p class="hint-text text-lg">Tap the top card to continue...</p>

    </div>

    <!-- Final Happy Birthday Message -->
    <div class="final-message">
        <h1 class="text-6xl md:text-8xl text-pink-900 font-extrabold tracking-tight mb-4 text-shadow-lg">Happy Birthday!</h1>
        <p class="text-3xl md:text-4xl text-pink-700 mt-4">I love you more than words can say.</p>
        
        <!-- Simple Cake Emoji/Image -->
        <img class="cake-img" src="images/cake.jpg" alt="Birthday Cake">
        <p class="text-xl text-pink-900 mt-8">Wishing you the happiest day ever!</p>
    </div>

<script>
    // Firebase is not needed for this static interaction, so we won't initialize it.

    const stackContainer = document.querySelector('.stack-container');
    const finalMessage = document.querySelector('.final-message');
    const hintText = document.querySelector('.hint-text');

    // Array of card IDs, from bottom to top (1 is lowest, 4 is highest/first clicked)
    const cardOrder = ['card-1', 'card-2', 'card-3', 'card-4'];
    let currentCardIndex = cardOrder.length - 1; // Start with the index of the top card (3)

    // Function to handle the card removal animation
    function removeTopCard(cardElement) {
        // Remove click listener immediately to prevent double-clicks
        cardElement.style.pointerEvents = 'none';

        // Apply a massive, complex 3D transformation to make it 'fly away'
        cardElement.style.transform = 'translate(150vw, -150vh) rotateZ(1080deg) rotateX(180deg) scale(0.1)';
        cardElement.style.opacity = '0';
        
        // After the animation finishes, update the Z-index of the remaining cards
        // Set timeout should match the CSS transition duration (1000ms/1s)
        setTimeout(() => {
            currentCardIndex--; // Move to the next card down

            if (currentCardIndex >= 0) {
                // Update hint text for the new top card
                const nextCard = document.getElementById(cardOrder[currentCardIndex]);
                if (nextCard) {
                    // Bring the next card to the top visibly by updating its Z-index
                    nextCard.style.zIndex = '40'; 
                }
            }
            
            // Final check
            if (currentCardIndex < 0) {
                // All cards are gone, show the final message
                hintText.style.display = 'none'; // Hide the hint
                stackContainer.style.display = 'none'; // Hide the container
                finalMessage.classList.add('visible'); // Show the message with transition
            }
        }, 800);
    }


    // Set up click listeners for all cards
    document.addEventListener('DOMContentLoaded', () => {
        const cards = document.querySelectorAll('.card');
        
        cards.forEach(card => {
            card.addEventListener('click', (event) => {
                const clickedCardId = event.currentTarget.id;
                const expectedCardId = cardOrder[currentCardIndex];

                // Only allow the highest-zIndex/top-most card to be clicked
                if (clickedCardId === expectedCardId) {
                    removeTopCard(event.currentTarget);
                }
            });
        });
    });
</script>

</body>
</html>
